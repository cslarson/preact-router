!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("preact")):"function"==typeof define&&define.amd?define(["preact"],e):t.preactRouter=e(t.preact)}(this,function(t){"use strict";function e(t,e){var n=arguments.length<=2||void 0===arguments[2]?c:arguments[2],o=/(?:\?([^#]*))?(#.*)?$/,i=t.match(o),a={},u=void 0;if(i&&i[1])for(var s=i[1].split("&"),p=0;p<s.length;p++){var l=s[p].split("=");a[decodeURIComponent(l[0])]=decodeURIComponent(l.slice(1).join("="))}t=r(t.replace(o,"")),e=r(e||"");for(var f=Math.max(t.length,e.length),p=0;f>p;p++)if(e[p]&&":"===e[p].charAt(0))a[e[p].substring(1)]=decodeURIComponent(t[p]||"");else if(e[p]!==t[p]){u=!1;break}return n["default"]!==!0&&u===!1?!1:a}function n(t,e){var n=t.attributes||c,r=e.attributes||c;if(n["default"])return 1;if(r["default"])return-1;var i=o(n.path)-o(r.path);return i||n.path.length-r.path.length}function r(t){return i(t).split("/")}function o(t){return(i(t).match(/\/+/g)||"").length}function i(t){return t.replace(/(^\/+|\/+$)/g,"")}function a(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];"string"!=typeof t&&t.url&&(e=t.replace,t=t.url),history&&(e===!0?history.replaceState(null,null,t):history.pushState(null,null,t))}function u(t){return a(this.getAttribute("href")),t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),!1}var s={};s.inherits=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},s.objectWithoutProperties=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},s._extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s.a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};var c={};"undefined"!=typeof window&&!function(t){var e=t.pushState,n=t.replaceState;t.pushState=function(n){return e.apply(t,arguments),"function"==typeof t.onpushstate&&t.onpushstate({state:n}),e.apply(t,arguments)},t.replaceState=function(e){return"function"==typeof t.onreplacestate&&t.onreplacestate({state:e}),n.apply(t,arguments)}}(window.history);var p=function(e){var n=e.children,r=s.objectWithoutProperties(e,["children"]);return t.h("a",s._extends({},r,{onClick:u}),n)},l=function(r){function o(){s.a(this,o),r.apply(this,arguments)}return s.inherits(o,r),o.prototype.componentDidMount=function(){this.lastActive=this.getActive(this.props)},o.prototype.componentDidUpdate=function(t,e){this.lastActive=this.getActive(t)},o.prototype.getActive=function(t){var r=t.children,o=(t.onChange,t.url),i=r.slice().sort(n).filter(function(t){var n=t.attributes,r=n.path,i=e(o,r,n);if(i){n.url=o,n.matches=i;for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a]);return!0}});return i[0]||null},o.prototype.render=function(e){var n=e.url,r=this.getActive(e),o=[r];this.lastActive&&(console.log(this.lastActive.nodeName.name),o.unshift(this.lastActive));var i=this.previousUrl;return n!==i&&(this.previousUrl=n,"function"==typeof onChange&&onChange({router:this,url:n,previous:i,active:r})),t.h("div",{"class":e["class"]},o)},o}(t.Component),f=function(e){var n=e.component,r=e.url,o=e.matches;return t.h(n,{url:r,matches:o})};return l.route=a,l.Router=l,l.Route=f,l.Link=p,l});
//# sourceMappingURL=preact-router.min.js.map