!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("preact")):"function"==typeof define&&define.amd?define(["preact"],e):t.preactRouter=e(t.preact)}(this,function(t){"use strict";function e(t,e){var n=arguments.length<=2||void 0===arguments[2]?p:arguments[2],i=/(?:\?([^#]*))?(#.*)?$/,o=t.match(i),a={},s=void 0;if(o&&o[1])for(var u=o[1].split("&"),c=0;c<u.length;c++){var l=u[c].split("=");a[decodeURIComponent(l[0])]=decodeURIComponent(l.slice(1).join("="))}t=r(t.replace(i,"")),e=r(e||"");for(var f=Math.max(t.length,e.length),c=0;f>c;c++)if(e[c]&&":"===e[c].charAt(0))a[e[c].substring(1)]=decodeURIComponent(t[c]||"");else if(e[c]!==t[c]){s=!1;break}return n["default"]!==!0&&s===!1?!1:a}function n(t,e){var n=t.attributes||p,r=e.attributes||p;if(n["default"])return 1;if(r["default"])return-1;var o=i(n.path)-i(r.path);return o||n.path.length-r.path.length}function r(t){return o(t).split("/")}function i(t){return(o(t).match(/\/+/g)||"").length}function o(t){return t.replace(/(^\/+|\/+$)/g,"")}function a(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];"string"!=typeof t&&t.url&&(e=t.replace,t=t.url),history&&(e===!0?history.replaceState(null,null,t):history.pushState(null,null,t))}function s(t){return a(this.getAttribute("href")),t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),!1}var u={};u.inherits=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},u.objectWithoutProperties=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},u._extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u.a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};var p={};"undefined"!=typeof window&&!function(t){var e=t.pushState,n=t.replaceState;t.pushState=function(n){return e.apply(t,arguments),"function"==typeof t.onpushstate&&t.onpushstate({state:n}),e.apply(t,arguments)},t.replaceState=function(e){return"function"==typeof t.onreplacestate&&t.onreplacestate({state:e}),n.apply(t,arguments)}}(window.history);var c=function(e){var n=e.children,r=u.objectWithoutProperties(e,["children"]);return t.h("a",u._extends({},r,{onClick:s}),n)},l=function(r){function i(){u.a(this,i),r.apply(this,arguments)}return u.inherits(i,r),i.prototype.componentDidMount=function(){this.lastActive=this.getActive(this.props)},i.prototype.componentDidUpdate=function(t,e){var n=this;this.lastActive=this.getActive(this.props),this.props.transition&&(this.transitionTimeout&&clearTimeout(this.transitionTimeout),this.transitionTimeout=setTimeout(function(){n.setState({transitionEnd:!0})},this.props.transition))},i.prototype.componentWillReceiveProps=function(t){t.transition&&this.setState({transitionEnd:!1})},i.prototype.getActive=function(t){var r=t.children,i=(t.onChange,t.url),o=r.slice().sort(n).filter(function(t){var n=t.attributes,r=n.path,o=e(i,r,n);if(o){n.url=i,n.matches=o;for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a]);return!0}});return o[0]||null},i.prototype.render=function(e,n){var r=n.transitionEnd,i=e.url,o=this.getActive(e),a=[o];e.transition&&!r&&this.lastActive?(o.attributes.transitionClass="transition-in",this.lastActive.attributes.transitionClass="transition-out",a.unshift(this.lastActive)):o.attributes.transitionClass="";var s=this.previousUrl;return i!==s&&(this.previousUrl=i,"function"==typeof onChange&&onChange({router:this,url:i,previous:s,active:o})),t.h("div",{"class":e["class"]+(e.transition&&!r?" transition":"")},a)},i}(t.Component),f=function(e){var n=e.component,r=e.url,i=e.matches;return t.h(n,{url:r,matches:i})};return l.route=a,l.Router=l,l.Route=f,l.Link=c,l});
//# sourceMappingURL=preact-router.min.js.map