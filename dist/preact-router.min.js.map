{"version":3,"sources":["../src/util.js","../src/index.js"],"names":["h","Component","exec","url","route","opts","arguments","length","undefined","EMPTY","reg","c","match","matches","ret","p","split","i","r","decodeURIComponent","slice","join","segmentize","replace","max","Math","charAt","substring","pathRankSort","a","b","aAttr","attributes","bAttr","diff","rank","path","strip","history","replaceState","pushState","routeTo","routers","forEach","router","getCurrentUrl","location","pathname","search","handleLinkClick","e","this","getAttribute","stopImmediatePropagation","stopPropagation","preventDefault","addEventListener","Link","_ref","children","props","babelHelpers","objectWithoutProperties","onClick","Router","_Component","call","state","prototype","setState","componentWillMount","push","componentWillUnmount","splice","indexOf","render","_ref2","_ref3","onChange","active","sort","filter","_ref4","hasOwnProperty","previous","previousUrl","current","Route","_ref5","RoutedComponent","component"],"mappings":"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","file":"preact-router.js","sourcesContent":["\nconst EMPTY = {};\n\nexport function exec(url, route, opts=EMPTY) {\n\tlet reg = /(?:\\?([^#]*))?(#.*)?$/,\n\t\tc = url.match(reg),\n\t\tmatches = {},\n\t\tret;\n\tif (c && c[1]) {\n\t\tlet p = c[1].split('&');\n\t\tfor (let i=0; i<p.length; i++) {\n\t\t\tlet r = p[i].split('=');\n\t\t\tmatches[decodeURIComponent(r[0])] = decodeURIComponent(r.slice(1).join('='));\n\t\t}\n\t}\n\turl = segmentize(url.replace(reg, ''));\n\troute = segmentize(route || '');\n\tlet max = Math.max(url.length, route.length);\n\tfor (let i=0; i<max; i++) {\n\t\tif (route[i] && route[i].charAt(0)===':') {\n\t\t\tmatches[route[i].substring(1)] = decodeURIComponent(url[i] || '');\n\t\t}\n\t\telse {\n\t\t\tif (route[i]!==url[i]) {\n\t\t\t\tret = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tif (opts.default!==true && ret===false) return false;\n\treturn matches;\n}\n\nexport function pathRankSort(a, b) {\n\tlet aAttr = a.attributes || EMPTY,\n\t\tbAttr = b.attributes || EMPTY;\n\tif (aAttr.default) return 1;\n\tif (bAttr.default) return -1;\n\tlet diff = rank(aAttr.path) - rank(bAttr.path);\n\treturn diff || (aAttr.path.length - bAttr.path.length);\n}\n\nexport function segmentize(url) {\n\treturn strip(url).split('/');\n}\n\nexport function rank(url) {\n\treturn (strip(url).match(/\\/+/g) || '').length;\n}\n\nexport function strip(url) {\n\treturn url.replace(/(^\\/+|\\/+$)/g, '');\n}\n","import { h, Component } from 'preact';\nimport { exec, pathRankSort } from './util';\n\nconst routers = [];\n\nfunction route(url, replace=false) {\n\tif (typeof url!=='string' && url.url) {\n\t\treplace = url.replace;\n\t\turl = url.url;\n\t}\n\tif (history) {\n\t\tif (replace===true) {\n\t\t\thistory.replaceState(null, null, url);\n\t\t}\n\t\telse {\n\t\t\thistory.pushState(null, null, url);\n\t\t}\n\t}\n\trouteTo(url);\n}\n\nfunction routeTo(url) {\n\trouters.forEach( router => router.routeTo(url) );\n}\n\nfunction getCurrentUrl(url) {\n\treturn typeof location!=='undefined' ?\n\t\t`${location.pathname || ''}${location.search || ''}` :\n\t\turl || '';\n}\n\nif (typeof addEventListener==='function') {\n\taddEventListener('popstate', () => routeTo(getCurrentUrl()));\n}\n\n\nfunction handleLinkClick(e) {\n\troute(this.getAttribute('href'));\n\tif (e.stopImmediatePropagation) e.stopImmediatePropagation();\n\te.stopPropagation();\n\te.preventDefault();\n\treturn false;\n}\n\n\nconst Link = ({ children, ...props }) => (\n\t<a {...props} onClick={ handleLinkClick }>{ children }</a>\n);\n\n\nclass Router extends Component {\n\tconstructor(props) {\n\t\tsuper();\n\t\t// set initial url\n\t\tthis.state.url = getCurrentUrl(props && props.url);\n\t}\n\n\trouteTo(url) {\n\t\tthis.setState({ url });\n\t}\n\n\tcomponentWillMount() {\n\t\trouters.push(this);\n\t}\n\n\tcomponentWillUnmount() {\n\t\trouters.splice(routers.indexOf(this), 1);\n\t}\n\n\trender({ children, onChange }, { url }) {\n\t\tlet active = children.slice().sort(pathRankSort).filter( ({ attributes }) => {\n\t\t\tlet path = attributes.path,\n\t\t\t\tmatches = exec(url, path, attributes);\n\t\t\tif (matches) {\n\t\t\t\tattributes.url = url;\n\t\t\t\tattributes.matches = matches;\n\t\t\t\t// copy matches onto props\n\t\t\t\tfor (let i in matches) {\n\t\t\t\t\tif (matches.hasOwnProperty(i)) {\n\t\t\t\t\t\tattributes[i] = matches[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t\tlet previous = this.previousUrl;\n\t\tif (url!==previous) {\n\t\t\tthis.previousUrl = url;\n\t\t\tif (typeof onChange==='function') {\n\t\t\t\tonChange({\n\t\t\t\t\trouter: this,\n\t\t\t\t\turl,\n\t\t\t\t\tprevious,\n\t\t\t\t\tactive,\n\t\t\t\t\tcurrent: active[0]\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn active[0] || null;\n\t}\n}\n\n\nconst Route = ({ component:RoutedComponent, url, matches }) => (\n\t<RoutedComponent {...{url, matches}} />\n);\n\n\nRouter.route = route;\nRouter.Router = Router;\nRouter.Route = Route;\nRouter.Link = Link;\n\nexport default Router;\n"]}